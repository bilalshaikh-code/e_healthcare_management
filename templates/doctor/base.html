{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Doctor Panel - HealthPlus{% endblock %}</title>

    <!-- Fonts & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <!-- Bootstrap (Optional) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/doctor.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="wrapper">

        <!-- Sidebar -->
        <div class="sidebar" style="overflow-y: auto;">
            <h3 class="text-center text-white mb-2 py-3">
                <i class="fas fa-heartbeat me-2"></i> HealthPlus
            </h3>

            <nav class="nav flex-column px-3">
                <!-- Dashboard -->
                <a href="{% url 'doctor_dashboard' %}" class="nav-link {% if request.resolver_match.url_name == 'doctor_dashboard' %}active{% endif %}">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>

                <!-- Appointments (3 tabs) -->
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle {% if request.resolver_match.url_name in 'dongoing dupcoming doutgoing' %}active{% endif %}" 
                    data-bs-toggle="dropdown" role="button">
                        <i class="fas fa-calendar-check"></i>
                        <span>Appointments</span>
                    </a>
                    <ul class="dropdown-menu shadow border-0">
                        <li><a class="dropdown-item" href="{% url 'dongoing' %}">Today's & Upcoming</a></li>
                        <li><a class="dropdown-item" href="{% url 'dupcoming' %}">Future Appointments</a></li>
                        <li><a class="dropdown-item" href="{% url 'doutgoing' %}">Past Appointments</a></li>
                    </ul>
                </div>

                <!-- My Slots -->
                <a href="{% url 'doctor_slots' %}" class="nav-link {% if request.resolver_match.url_name == 'doctor_slots' %}active{% endif %}">
                    <i class="fas fa-clock"></i>
                    <span>My Slots</span>
                </a>

                <!-- Weekly Schedule -->
                <a href="{% url 'weekly_schedule' %}" class="nav-link {% if request.resolver_match.url_name == 'weekly_schedule' %}active{% endif %}">
                    <i class="fas fa-calendar-week"></i>
                    <span>Weekly Schedule</span>
                </a>

                <!-- Calendar View -->
                <a href="{% url 'doctor_calendar' %}" class="nav-link {% if request.resolver_match.url_name == 'doctor_calendar' %}active{% endif %}">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Calendar View</span>
                </a>

                <!-- Take Leave -->
                <a href="{% url 'take_leave' %}" class="nav-link {% if request.resolver_match.url_name == 'take_leave' %}active{% endif %}">
                    <i class="fas fa-plane-departure"></i>
                    <span>Take Leave</span>
                </a>

                <!-- ADD THIS LINE IN YOUR DOCTOR SIDEBAR -->
                <a href="{% url 'doctor_chat_list' %}" 
                class="nav-link {% if request.resolver_match.url_name == 'doctor_chat_list' or request.resolver_match.url_name == 'chat_room' %}active{% endif %}">
                    <i class="fas fa-comments"></i>
                    <span>Patient Messages {% if chat_rooms.count > 0 %}<span class="badge bg-danger ms-2">{{ chat_rooms.count }}</span>{% endif %}</span>
                </a>

                <!-- View Prescriptions -->
                <a href="{% url 'docprescription' %}" class="nav-link {% if request.resolver_match.url_name == 'docprescription' %}active{% endif %}">
                    <i class="fas fa-file-prescription"></i>
                    <span>View Prescriptions</span>
                </a>

                <hr class="bg-light opacity-25 my-4">

                <!-- Profile -->
                <a href="{% url 'doctor_profile' %}" class="nav-link {% if request.resolver_match.url_name == 'doctor_profile' %}active{% endif %}">
                    <i class="fas fa-user-md"></i>
                    <span>My Profile</span>
                </a>

                <!-- Logout -->
                <a href="{% url 'logout' %}" class="nav-link text-danger mt-auto">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main">
            {% block content %}{% endblock %}
        </div>

    </div>

    <!-- JS Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // Notification toggle
        const notifToggle = document.getElementById('notifToggle');
        const notifDropdown = document.getElementById('notifDropdown');
        if(notifToggle) {
            notifToggle.addEventListener('click', () => {
                notifDropdown.classList.toggle('active');
            });
        }
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
